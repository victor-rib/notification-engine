<div class="headers" style="display:flex ; justify-content: space-between">
    <h1>Admin Tools - Manage Entities</h1>
    <div class="align-right">
        <div pRipple type="button" icon="pi pi-sign-out" class="pi pi-sign-out" (click)="logOut()"></div>
    </div>
</div>

<div class="controls" style="display:flex; justify-content: space-between;">
    <div class="align-left">
        <div class="default-button" title="notifications" (click)="navigateToRoute('notifications')">
            <span>Notifications</span>
        </div>
    </div>
    <div class="align-right">
        <div *ngIf="isadmin" class="default-button" title="user settings" (click)="navigateToRoute('user-settings')">
            <span>User Settings</span>
        </div>
    </div>
</div>
<div class="tab">
    <button id="user-button" class="tablinks" (click)="openTab($event,'users')">Users</button>
    <button id="alerttypes-button" class="tablinks" (click)="openTab($event,'alerttypes')">Alert Types</button>
    <button id="device-groups" class="tablinks" (click)="openTab($event,'devicegroups')">Device groups</button>
    <button id="grouptotype-button" class="tablinks" (click)="openTab($event, 'grouptotype')">Group To Type</button>
    <div class="pi pi-plus add-button" title="Add Record" (click)="openCreationModal()"></div>
</div>
<div class="table-div">
    <p-table [columns]="headers" [value]="data" [reorderableColumns]="true" responsiveLayout="scroll"
        [scrollable]="true" scrollHeight="300px" scrollDirection="both" dataKey="deviceid" [style]="{width:'97vw'}">
        <ng-template pTemplate="header" let-columns>
            <tr>
                <th style="width:150px" pFrozenColumn> </th>
                <th style="text-align:center;width:200px" pReorderableColumn *ngFor="let col of columns">
                    <label>{{col}}</label>
                </th>
            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-data let-columns="columns" let-ri="rowIndex">
            <tr>
                <td style="text-align:center;width:150px" pFrozenColumn>
                    <div type="button" icon="pi pi-trash" (click)="onDeleteRow(data, ri)" class="pi pi-trash"></div>
                    <div *ngIf="currentTab !== 'grouptotype'" type="button" icon="pi pi-pencil" (click)="onRowEditInit(data, ri)" class="pi pi-pencil"></div>
                </td>
                <td style="width:200px;text-align:center;" *ngFor="let col of columns" id="{{ 'cellid-' + col + ri }}">
                    <p-cellEditor>
                        <ng-template pTemplate="input">
                            <input pInputText type="text" [(ngModel)]="data[col]">
                        </ng-template>
                        <ng-template pTemplate="output">
                            {{data[col]}}
                        </ng-template>
                    </p-cellEditor>
                </td>
            </tr>
        </ng-template>
    </p-table>
</div>